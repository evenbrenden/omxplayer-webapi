<html>
<body>
    <select id="videos"></select>
    <button id="play" onclick="play()">Play</button>
    <button id="stop" onclick="stop()">Stop</button>
    <script>

        function handleBadResponse(response) {
            if (!response.ok) {
                document.body.innerHTML = response.status;
            }
        }

        async function play() {
            let response = await fetch('/start/' + videos.value);
            handleBadResponse(response);
        }

        async function stop() {
            let response = await fetch('/stop');
            handleBadResponse(response);
        }

        (async () => {
            let response = await fetch('/list');
            handleBadResponse(response);
            let list = await response.json();
            list.result.forEach(video => videos.append(new Option(video, video)));
        })();

    </script>
</body>
</html>
